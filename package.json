{
  "name": "unifiedapexvalidator",
  "displayName": "Unified Apex Validator",
  "description": "Salesforce Apex validation and reporting suite built natively in TypeScript for VS Code.",
  "publisher": "ozkrgonzalez",
  "version": "1.8.0",
  "icon": "media/icon.png",
  "license": "GPL-3.0-only",
  "repository": "https://github.com/ozkrgonzalez/UnifiedApexValidator.git",
  "keywords": [
    "salesforce",
    "apex",
    "validator",
    "pmd",
    "cpd",
    "code analyzer",
    "einstein gpt",
    "report",
    "vs code"
  ],
  "categories": [
    "Linters",
    "Testing",
    "Other"
  ],
  "engines": {
    "vscode": "^1.104.0"
  },
  "main": "./dist/extension.js",
  "scripts": {
    "clean": "rimraf dist node_modules && del /q *.vsix 2>nul || true",
    "compile": "tsc -p .",
    "bundle": "esbuild src/extension.ts --bundle --platform=node --external:vscode --outdir=dist --format=cjs",
    "copy-resources": "node scripts/copyResources.js",
    "build": "npm run clean && npm install && npm run compile && npm run bundle && npm run copy-resources",
    "package": "npm run build && npm install --omit=dev && vsce package"
  },
  "activationEvents": [
    "onCommand:UnifiedApexValidator.validateApex",
    "onCommand:UnifiedApexValidator.compareApexClasses",
    "onCommand:UnifiedApexValidator.whereIsUsed",
    "onCommand:UnifiedApexValidator.formatApexAllman",
    "workspaceContains:**/*.xml",
    "onLanguage:apex"
  ],
  "contributes": {
    "viewsContainers": {
      "activitybar": [
        {
          "id": "uav",
          "title": "Unified Apex Validator",
          "icon": "media/apex-icon.svg"
        }
      ]
    },
    "views": {
      "uav": [
        {
          "id": "uav.dependenciesView",
          "name": "üîß Dependencies"
        },
        {
          "id": "uav.reportsView",
          "name": "üìä Reports"
        },
        {
          "id": "uav.logsView",
          "name": "üìú Logs"
        }
      ]
    },
    "commands": [
      {
        "command": "UnifiedApexValidator.validateApex",
        "title": "UAV: Validate Apex Code"
      },
      {
        "command": "uav.reportsView.refresh",
        "title": "Refresh Reports",
        "icon": "$(refresh)"
      },
      {
        "command": "uav.reportsView.openFolder",
        "title": "Open Reports Folder",
        "icon": "$(folder-opened)"
      },
      {
        "command": "uav.logsView.refresh",
        "title": "Refresh Logs",
        "icon": "$(refresh)"
      },
      {
        "command": "uav.logsView.openFolder",
        "title": "Open logs folder",
        "icon": "$(folder-opened)"
      },
      {
        "command": "UnifiedApexValidator.compareApexClasses",
        "title": "UAV: Compare Apex Classes against Org"
      },
      {
        "command": "UnifiedApexValidator.generateApexDocChunked",
        "title": "UAV: Generate ApexDoc"
      },
      {
        "command": "UnifiedApexValidator.whereIsUsed",
        "title": "UAV: Where is Used?"
      },
      {
        "command": "UnifiedApexValidator.formatApexAllman",
        "title": "UAV: Formatear Apex (Allman)",
        "enablement": "config.UnifiedApexValidator.enableAllmanFormatter"
      }
    ],
    "menus": {
      "view/title": [
        {
          "command": "uav.reportsView.refresh",
          "when": "view == uav.reportsView",
          "group": "navigation"
        },
        {
          "command": "uav.reportsView.openFolder",
          "when": "view == uav.reportsView",
          "group": "navigation"
        },
        {
          "command": "uav.logsView.refresh",
          "when": "view == uav.logsView",
          "group": "navigation"
        },
        {
          "command": "uav.logsView.openFolder",
          "when": "view == uav.logsView",
          "group": "navigation"
        }
      ],
      "explorer/context": [
        {
          "command": "UnifiedApexValidator.validateApex",
          "when": "resourceExtname =~ /\\.?xml/i",
          "group": "z_unifiedApex@1"
        },
        {
          "command": "UnifiedApexValidator.validateApex",
          "when": "resourceExtname == .cls",
          "group": "z_unifiedApex@2"
        },
        {
          "command": "UnifiedApexValidator.compareApexClasses",
          "when": "resourceExtname =~ /\\.?xml/i",
          "group": "z_unifiedApex@10"
        },
        {
          "command": "UnifiedApexValidator.compareApexClasses",
          "when": "resourceExtname =~ /\\.?cls/i",
          "group": "z_unifiedApex@11"
        },
        {
          "command": "UnifiedApexValidator.whereIsUsed",
          "when": "resourceExtname =~ /\\.?cls/i",
          "group": "z_unifiedApex@12"
        },
        {
          "command": "UnifiedApexValidator.formatApexAllman",
          "when": "(resourceExtname == .cls || resourceExtname == .trigger) && config.UnifiedApexValidator.enableAllmanFormatter",
          "group": "z_unifiedApex@13"
        }
      ],
      "editor/context": [
        {
          "command": "UnifiedApexValidator.validateApex",
          "when": "resourceExtname =~ /\\.?xml/i",
          "group": "z_unifiedApex@3"
        },
        {
          "command": "UnifiedApexValidator.validateApex",
          "when": "resourceExtname == .cls",
          "group": "z_unifiedApex@4"
        },
        {
          "command": "UnifiedApexValidator.compareApexClasses",
          "when": "resourceExtname =~ /\\.?cls/i",
          "group": "z_unifiedApex@12"
        },
        {
          "command": "UnifiedApexValidator.whereIsUsed",
          "when": "resourceExtname =~ /\\.?cls/i",
          "group": "z_unifiedApex@13"
        },
        {
          "command": "UnifiedApexValidator.generateApexDocChunked",
          "when": "resourceExtname =~ /\\.?cls/i",
          "group": "z_unifiedApex@14"
        },
        {
          "command": "UnifiedApexValidator.formatApexAllman",
          "when": "editorLangId == apex && config.UnifiedApexValidator.enableAllmanFormatter",
          "group": "z_unifiedApex@15"
        }
      ]
    },
    "configuration": {
      "title": "Unified Apex Validator Settings",
      "properties": {
        "UnifiedApexValidator.sfClientId": {
          "type": "string",
          "default": "",
          "description": "Connected App Client Id."
        },
        "UnifiedApexValidator.sfClientSecret": {
          "type": "string",
          "default": "",
          "description": "Connected App Client Secret."
        },
        "UnifiedApexValidator.sfDomain": {
          "type": "string",
          "default": "MyDomain.sanboxname.sandbox.lightning.force.com",
          "description": "Salesforce Org Domain."
        },
        "UnifiedApexValidator.sfOrgAlias": {
          "type": "string",
          "default": "MySanboxName",
          "description": "Salesforce Org Alias."
        },
        "UnifiedApexValidator.sfRepositoryDir": {
          "type": "string",
          "default": "",
          "description": "Apex Class Local Git Repository."
        },
        "UnifiedApexValidator.skipIAAnalysis": {
          "type": "boolean",
          "default": false,
          "description": "Skyp IA Analysis."
        },
        "UnifiedApexValidator.sfGptEndpoint": {
          "type": "string",
          "default": "https://api.salesforce.com/einstein/platform",
          "description": "Einstein GPT Endpoint."
        },
        "UnifiedApexValidator.sfGptModel": {
          "type": "string",
          "default": "sfdc_ai__DefaultOpenAIGPT4OmniMini",
          "description": "Einstein IA Model"
        },
        "UnifiedApexValidator.iaPromptTemplate": {
          "type": "string",
          "default": "Analiza la clase Apex llamada '{class_name}'.\n\nC√≥digo (parcial si fue truncado):\n{truncated_body}\n\nResponde en formato MARKDOWN con:\n## üìò Descripci√≥n de la clase\nExplica brevemente su prop√≥sito.\n\n## ‚úÖ Cumplimiento de buenas pr√°cticas\nLista con vi√±etas usando ‚úÖ o ‚ö†Ô∏è seg√∫n corresponda.\n\n## üõ†Ô∏è Recomendaciones de mejora\nCada √≠tem debe comenzar con un emoji relacionado (‚ö°, ‚ôªÔ∏è, üîí, üì®, etc.).\nSi corresponde, incluye ejemplos de c√≥digo en bloques ```apex.",
          "description": "Einstein Base Prompt"
        },
        "UnifiedApexValidator.maxIAClassChars": {
          "type": "integer",
          "default": 25000,
          "description": "Class body MAX chars to pass Einstein GPT."
        },
        "UnifiedApexValidator.classDocTags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [
            "@description",
            "@since",
            "@author",
            "@testClass"
          ],
          "markdownDescription": "Lista de etiquetas para la cabecera ApexDoc de las clases. Se insertan vac√≠as cuando faltan en la respuesta del modelo."
        },
        "UnifiedApexValidator.methodDocTags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [
            "@description",
            "@param",
            "@return"
          ],
          "markdownDescription": "Lista de etiquetas para la documentaci√≥n ApexDoc de m√©todos y constructores. Las etiquetas faltantes se insertan vac√≠as cuando no aparecen en la respuesta del modelo."
        },
        "UnifiedApexValidator.apexDocLanguage": {
          "type": "string",
          "enum": [
            "spanish",
            "english"
          ],
          "enumDescriptions": [
            "Genera las descripciones de ApexDoc en espa√±ol (etiquetas en ingl√©s).",
            "Genera las descripciones de ApexDoc completamente en ingl√©s."
          ],
          "default": "spanish",
          "description": "Idioma usado por el generador de ApexDoc asistido por IA."
        },
        "UnifiedApexValidator.sfCliPath": {
          "type": "string",
          "default": "sf",
          "description": "Salesforce Cli Path if not defined in Path System Variable."
        },
        "UnifiedApexValidator.outputDir": {
          "type": "string",
          "default": "",
          "description": "Report output folder path"
        },
        "UnifiedApexValidator.keepLogFiles": {
          "type": "boolean",
          "default": true,
          "description": "Keep Logs and Temp files after a success run."
        },
        "UnifiedApexValidator.enableAllmanFormatter": {
          "type": "boolean",
          "default": true,
          "description": "Enable the Allman Apex formatter command and context menus."
        },
        "UnifiedApexValidator.traceAst": {
          "type": "boolean",
          "default": true,
          "description": "Activate AST Trace."
        }
      }
    }
  },
  "files": [
    "dist",
    "media",
    "resources/templates",
    "node_modules/fs-extra",
    "node_modules/universalify",
    "node_modules/graceful-fs",
    "node_modules/jsonfile",
    "node_modules/nunjucks",
    "node_modules/html-pdf-node",
    "node_modules/axios",
    "node_modules/fast-xml-parser",
    "node_modules/winston",
    "node_modules/dotenv"
  ],
  "vsce": {
    "dependencies": true
  },
  "dependencies": {
    "@apexdevtools/apex-parser": "^4.4.1",
    "@types/diff": "^7.0.2",
    "antlr4ts": "^0.5.0-alpha.4",
    "axios": "^1.12.2",
    "diff": "^8.0.2",
    "dotenv": "^17.2.3",
    "execa": "^9.6.0",
    "fast-xml-parser": "^5.3.0",
    "fs-extra": "^11.3.2",
    "markdown-it": "^14.1.0",
    "marked": "^12.0.2",
    "nunjucks": "^3.2.4",
    "typescript": "^5.9.3"
  },
  "devDependencies": {
    "@types/fs-extra": "^11.0.4",
    "@types/glob": "^8.1.0",
    "@types/html-pdf-node": "^1.0.2",
    "@types/markdown-it": "^14.1.2",
    "@types/node": "^24.7.2",
    "@types/nunjucks": "^3.2.6",
    "@types/vscode": "^1.104.0",
    "@types/xml2js": "^0.4.14",
    "@vscode/test-electron": "^2.5.2",
    "@vscode/vsce": "^3.6.2",
    "esbuild": "^0.25.10",
    "prettier": "^3.6.2",
    "prettier-plugin-apex": "^2.2.6",
    "rimraf": "^6.0.1"
  }
}
